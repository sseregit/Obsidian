
```yaml
product-composite:  
  env:  
    RESILIENCE4J_TIMELIMITER_INSTANCES_PRODUCT_TIMEOUTDURATION: 20s  
  envFromSecretRefs:  
    - config-client-credentials
```
environments/dev-env/values.yaml에 env: 추가

### 테스트를 위한 ACCESS_TOKEN 가져오기
`curl -d grant_type=client_credentials -d audience=https://localhost:8443/product-composite -d scope=product:write+product:read -d client_id=SY3iYhCMh3P9mWniMMTs5L4uxExwn3Y0 -d client_secret=TX6qChTxC4g1sCqVdAI6dYIxHLWFBcIkNH4VrTemalY5qWHsmIyJoIkZVeR9-jEn -ks https://writer:writer-secret@localhost:30443/oauth2/token | jq .access_token -r`

### delay 매개 변수를 사용해 5초 지연되는 테스트 요청 보내기
`time curl -kH "Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik04UHRXQTJPVjZVZ0x5bGs5ZUlKNCJ9.eyJpc3MiOiJodHRwczovL2Rldi1kZXkweWZ3MnpmMnhiczc3LnVzLmF1dGgwLmNvbS8iLCJzdWIiOiJTWTNpWWhDTWgzUDltV25pTU1UczVMNHV4RXh3bjNZMEBjbGllbnRzIiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODQ0My9wcm9kdWN0LWNvbXBvc2l0ZSIsImlhdCI6MTc0ODc4ODk5MywiZXhwIjoxNzQ4ODc1MzkzLCJzY29wZSI6InByb2R1Y3Q6cmVhZCBwcm9kdWN0OndyaXRlIiwiZ3R5IjoiY2xpZW50LWNyZWRlbnRpYWxzIiwiYXpwIjoiU1kzaVloQ01oM1A5bVduaU1NVHM1TDR1eEV4d24zWTAifQ.RGBUB5_aWx-yZrntgMnz5HCVU7o5XhLbVtALxXLJCujER6WcmLg20iZV_bRq0D8i-ykIhERnWve92C_9O4WJ3OODpAXPPG9sKxf1ySD6z4maSTx5hnhYf5LEoKH8o949kqB5tloShGswYYsxN78012zobhXv0VK_b6U8u3CFC1iIDa0v_Ti1kcgmEGzMCLzKGTDcujxIjprQv6MxhpR9EFfOSpEDr2-gF1V7dj_vl6XUrbJG7GO6SA05Bz7xZnGZgvHhjZs2yTGN7gz5TUNF8mfRgR6XvUbuNEmKt_RqbBPQmLGAYg0F7W6sEv9ac0vpJPpIYwXWmBbV1x--_RYJMQ" https://$MINIKUBE_HOST:30443/product-composite/1?delay=5`

### Siege를 사용해 완료에 5초가 걸리는 요청을 5명의 동시 사용자가 보내듯이 0~2초 사이의 지연 시간을 두고 분산해 전송하기.
```bash
siege -c5 -d2 -v -H "Authorization: Bearer eyJraWQiOiI0ODIwZDA1My1jZGNmLTQ0MjQtOGMzNS1hZWZkNTgyN2M1ZDEiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ3cml0ZXIiLCJhdWQiOiJ3cml0ZXIiLCJuYmYiOjE3NDg3ODg4NjUsInNjb3BlIjpbInByb2R1Y3Q6d3JpdGUiLCJwcm9kdWN0OnJlYWQiXSwiaXNzIjoiaHR0cHM6Ly9kZXYtZGV5MHlmdzJ6ZjJ4YnM3Ny51cy5hdXRoMC5jb20iLCJleHAiOjE3NDg3OTI0NjUsImlhdCI6MTc0ODc4ODg2NSwianRpIjoiNzgzZDEzZDctM2U2Yi00NGMzLWE2NDUtYTUwMDdjN2M5MjA5In0.X_I1E4M2Gx3Sx3zqycQXNNoyHSS32_4m85VIsF1HGSWLOVC7pc1XEnN_kGhHKSN-rWKVOt4vKD5kPhoqSqkXR9_pQ0C5-ugoyIUfnpAlGU0CQ06333ZYEDpr5RQ4rsyyKd0b34I7lDGFXrIN8VFZyb7S0Q3yO6VVKP_0p2q38NHQjrmBTk6Hrw8G-LhU-mIWFmLP6wpXne9QB_H1oNEjmWBiTflRbuQzgvXKFEha1LL-cVNhduANVL2HywEtaJGxWIIAkg87kxbQ3IjpnrH3Jx5ENq4W_jyd98pByPs525G98pKFbXOsQ_plWAPjeqqauBnIIdoCHSCy90q2Cen4iA" https://$MINIKUBE_HOST:30443/product-composite/1?delay=5
```