### β… Prometheusλ΅ μ κ²€ν•  μ μλ” λ„¤νΈμ›ν¬ ν•­λ©

|μ κ²€ ν•­λ©|κ°€λ¥ μ—¬λ¶€|μ‚¬μ© κ°€λ¥ν• Exporter|
|---|---|---|
|**CPU μ‚¬μ©λ¥  (λΌμ°ν„°, μ¤μ„μΉ λ“± λ„¤νΈμ›ν¬ μ¥λΉ„)**|β… κ°€λ¥|`snmp_exporter`|
|**λ©”λ¨λ¦¬ μ‚¬μ©λ¥  (λΌμ°ν„°, μ¤μ„μΉ λ“± λ„¤νΈμ›ν¬ μ¥λΉ„)**|β… κ°€λ¥|`snmp_exporter`|
|**λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤ μ‚¬μ©λ¥  (λ„¤νΈμ›ν¬ λ³‘λ© ν™•μΈ)**|β… κ°€λ¥|`node_exporter`, `snmp_exporter`|
|**μΈν„°νμ΄μ¤/λ¨λ“ μƒνƒ (Down/Up, CRC Error μ¦κ°€ μ—¬λ¶€)**|β… κ°€λ¥|`snmp_exporter`|
|**VLAN μƒνƒ λ° Tagging ν™•μΈ**|β… κ°€λ¥|`snmp_exporter` (VLAN μ •λ³΄ μμ§‘ κ°€λ¥)|
|**LB μƒνƒ ν™•μΈ (λ¶€ν• λ¶„μ‚° λ° Health-Check μƒνƒ μ κ²€)**|β… κ°€λ¥|`blackbox_exporter`, `haproxy_exporter`|
|**Mac/ARP Table μƒνƒ ν™•μΈ**|β… κ°€λ¥|`snmp_exporter`|
|**λΌμ°ν… Table μƒνƒ ν™•μΈ (Static/OSPF/BGP)**|β… κ°€λ¥|`snmp_exporter`|
|**STP μƒνƒ μ κ²€ (Loop λ°©μ§€ λ° ν†µμ‹  μƒνƒ ν™•μΈ)**|β… κ°€λ¥|`snmp_exporter`|
|**μ΄μ¤‘ν™” κµ¬μ„± μƒνƒ μ κ²€ (Failover μƒνƒ ν™•μΈ)**|β… κ°€λ¥|`snmp_exporter`|
|**ν†µμ‹  ν…μ¤νΈ (νΉμ • μ¥λΉ„μ™€μ μ—°κ²° ν™•μΈ)**|β… κ°€λ¥|`blackbox_exporter` (ICMP Ping, TCP/HTTP μ²΄ν¬)|
|**HW μƒνƒ κ΄€λ ¨ λ΅κ·Έ μ κ²€ (Fail, Error, Warning λ“±)**|β… κ°€λ¥|`promtail` + `Loki`|

---

### π“ μ„Έλ¶€ μ„¤λ…

1. **μμ› μ‚¬μ©λ¥  μ κ²€ (CPU, λ©”λ¨λ¦¬, λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤)**
    
    - `snmp_exporter`λ¥Ό ν™μ©ν•μ—¬ λΌμ°ν„°, μ¤μ„μΉ λ“±μ CPU λ° λ©”λ¨λ¦¬ μ‚¬μ©λ¥ μ„ λ¨λ‹ν„°λ§ κ°€λ¥.
    - `node_exporter` λλ” `snmp_exporter`λ¥Ό ν™μ©ν•μ—¬ λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤ μ‚¬μ©λ¥ μ„ ν™•μΈ κ°€λ¥.
2. **μΈν„°νμ΄μ¤/λ¨λ“ μƒνƒ μ κ²€**
    
    - `snmp_exporter`μ—μ„ κ° ν¬νΈλ³„ μƒνƒ(Up/Down) λ° CRC μ¤λ¥ μ¦κ°€ μ—¬λ¶€λ¥Ό μμ§‘ κ°€λ¥.
    - VLAN μ •λ³΄λ¥Ό ν™•μΈν•  μλ„ μμΌλ©°, ν•„μ”ν•λ©΄ μ¤μ„μΉλ³„ VLAN νƒκΉ… μƒνƒλ¥Ό μ¶”μ  κ°€λ¥.
3. **μ„λΉ„μ¤ μƒνƒ μ κ²€**
    
    - λ¶€ν• λ¶„μ‚°(LB) μƒνƒ ν™•μΈ
        - `haproxy_exporter`λ¥Ό ν™μ©ν•μ—¬ HAProxy κΈ°λ° λ΅λ“λ°Έλ°μ„ μƒνƒλ¥Ό ν™•μΈ κ°€λ¥.
        - `blackbox_exporter`λ¥Ό ν™μ©ν•μ—¬ νΉμ • μ„λ²„μ Health Check μν–‰ κ°€λ¥.
    - Mac/ARP ν…μ΄λΈ” μƒνƒ ν™•μΈ
        - `snmp_exporter`μ—μ„ Mac/ARP ν…μ΄λΈ”μ„ λ¨λ‹ν„°λ§ κ°€λ¥.
    - λΌμ°ν… ν…μ΄λΈ” μƒνƒ ν™•μΈ
        - `snmp_exporter`μ—μ„ Static/OSPF/BGP λ“±μ λΌμ°ν… ν…μ΄λΈ” μ •λ³΄λ¥Ό μμ§‘ κ°€λ¥.
    - STP μƒνƒ μ κ²€
        - `snmp_exporter`μ—μ„ STP μ„¤μ • μƒνƒ λ° Loop λ°μƒ μ—¬λ¶€λ¥Ό ν™•μΈ κ°€λ¥.
    - μ΄μ¤‘ν™” μƒνƒ μ κ²€ (Failover)
        - `snmp_exporter`μ—μ„ μ¥λΉ„μ HA (High Availability) μƒνƒλ¥Ό λ¨λ‹ν„°λ§ κ°€λ¥.
    - νΉμ • μ¥λΉ„μ™€μ ν†µμ‹  μƒνƒ ν™•μΈ
        - `blackbox_exporter`λ¥Ό μ‚¬μ©ν•μ—¬ Ping(ICMP), TCP, HTTP(S) κΈ°λ°μ μ—°κ²° μƒνƒλ¥Ό μ κ²€ κ°€λ¥.
4. **λ΅κ·Έ μ κ²€**
    
    - `promtail` + `Loki`λ¥Ό ν™μ©ν•μ—¬ λ„¤νΈμ›ν¬ μ¥λΉ„μ λ΅κ·Έ(Fail, Error, Warning λ“±)λ¥Ό μμ§‘ν•μ—¬ μ•λ μ„¤μ • κ°€λ¥.

---

### β Prometheusλ΅ μ§μ ‘ ν™•μΈν•κΈ° μ–΄λ ¤μ΄ ν•­λ©

- VLAN νƒκΉ… μƒνƒκ°€ μλ» μ„¤μ •λ κ²½μ°, Prometheusμ—μ„ μ§μ ‘ νƒμ§€ν•κΈ° μ–΄λ ¤μ›€.
    - μμ§‘λ SNMP λ°μ΄ν„°λ¥Ό κΈ°λ°μΌλ΅ λ¶„μ„ μ¤ν¬λ¦½νΈκ°€ ν•„μ”ν•  μ μμ.

---

### π”¥ κ²°λ΅ 

- `snmp_exporter`, `blackbox_exporter`, `haproxy_exporter`, `promtail + Loki` λ“±μ„ ν™μ©ν•λ©΄ λ€λ¶€λ¶„μ λ„¤νΈμ›ν¬ λ¨λ‹ν„°λ§μ΄ κ°€λ¥ν•¨.
- λ‹¤λ§, VLAN νƒκΉ… μ¤λ¥ λ“±μ λ³µμ΅ν• λ„¤νΈμ›ν¬ μ„¤μ • κ²€μ¦μ€ Prometheusμ—μ„ μ§μ ‘ κ°μ§€ν•κΈ° μ–΄λ ¤μΈ μ μμ.