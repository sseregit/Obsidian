
```yaml
product-composite:  
  env:  
    RESILIENCE4J_TIMELIMITER_INSTANCES_PRODUCT_TIMEOUTDURATION: 20s  
  envFromSecretRefs:  
    - config-client-credentials
```
environments/dev-env/values.yaml에 env: 추가

### 테스트를 위한 ACCESS_TOKEN 가져오기
`curl -d grant_type=client_credentials -ks https://writer:writer-secret@localhost:30443/oauth2/token | jq .access_token -r`

### delay 매개 변수를 사용해 5초 지연되는 테스트 요청 보내기
`time curl -kH "Authorization: Bearer eyJraWQiOiI0ODIwZDA1My1jZGNmLTQ0MjQtOGMzNS1hZWZkNTgyN2M1ZDEiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ3cml0ZXIiLCJhdWQiOiJ3cml0ZXIiLCJuYmYiOjE3NDg3ODg2MTYsImlzcyI6Imh0dHBzOi8vZGV2LWRleTB5ZncyemYyeGJzNzcudXMuYXV0aDAuY29tIiwiZXhwIjoxNzQ4NzkyMjE2LCJpYXQiOjE3NDg3ODg2MTYsImp0aSI6IjRkYjg0YTM4LWFhMDItNGMwYS1hMGI2LWYzMDdmZWIzNDdmMSJ9.QLLfWe3COanVnoY4BWu3PAqPaZI-H5FekNkoJwh_6pTGE45RfffC_vfdFz4PGnHoCzQXewp1rbCD9GsG5ZXYZ6bHa1EeLgwOl5OkLaM_ftRii6nfIyxgZBAB58Q0iDThWnIemBww5P-GBMkiqwN7W5gpo2qRbNxTeoEM9CI0zaMJQK_DxQ4hJ72sBDUKTwu_hw8-Ph5V-Eb0bfvPHU4PbONls5tLU_QqaGtj15dmQDjqkefk-jCcAKujixhJIJxJ-8YqsuZzQF6e08oCJ1Era6XHFaDpoQ2ujw4-26FDTwmze2gtS4tuWr-r6DnUujQ9KMI9WsnnhpaejR4EcFlWig" https://$MINIKUBE_HOST:30443/product-composite/1?delay=5`

### Siege를 사용해 완료에 5초가 걸리는 요청을 5명의 동시 사용자가 보내듯이 0~2초 사이의 지연 시간을 두고 분산해 전송하기.
```bash
siege -c5 -d2 -v -H "Authorization: Bearer eyJraWQiOiI0ODIwZDA1My1jZGNmLTQ0MjQtOGMzNS1hZWZkNTgyN2M1ZDEiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ3cml0ZXIiLCJhdWQiOiJ3cml0ZXIiLCJuYmYiOjE3NDg3ODg2MTYsImlzcyI6Imh0dHBzOi8vZGV2LWRleTB5ZncyemYyeGJzNzcudXMuYXV0aDAuY29tIiwiZXhwIjoxNzQ4NzkyMjE2LCJpYXQiOjE3NDg3ODg2MTYsImp0aSI6IjRkYjg0YTM4LWFhMDItNGMwYS1hMGI2LWYzMDdmZWIzNDdmMSJ9.QLLfWe3COanVnoY4BWu3PAqPaZI-H5FekNkoJwh_6pTGE45RfffC_vfdFz4PGnHoCzQXewp1rbCD9GsG5ZXYZ6bHa1EeLgwOl5OkLaM_ftRii6nfIyxgZBAB58Q0iDThWnIemBww5P-GBMkiqwN7W5gpo2qRbNxTeoEM9CI0zaMJQK_DxQ4hJ72sBDUKTwu_hw8-Ph5V-Eb0bfvPHU4PbONls5tLU_QqaGtj15dmQDjqkefk-jCcAKujixhJIJxJ-8YqsuZzQF6e08oCJ1Era6XHFaDpoQ2ujw4-26FDTwmze2gtS4tuWr-r6DnUujQ9KMI9WsnnhpaejR4EcFlWig" https://$MINIKUBE_HOST:30443/product-composite/1?delay=5
```