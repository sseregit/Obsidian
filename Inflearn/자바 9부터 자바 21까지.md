- 자바 9와 자바 플랫폼 모듈 시스템
	- 자바 플랫폼 모듈 시스템
		- 모듈
			- 여러 코드가 모인 독립적인 구성 요소
```groovy
subprojects {  
  
}  
  
allprojects {  

}
```
- 최상위 프로젝트에서 서브 모듈들을 컨트롤 할수 있다.
- Gradle
	- implementation
		- `implementation(project(":xxx-domain"))`
	- api
```groovy
plugins {
    id 'java-library'
}

...
api(project(":xxx-domain"))
```
		- 나를 가지고간 모듈도 나의 의존성을 사용할수 있게 할수 있는 옵션

- 자바 9에서 추가된 모듈(JPMS)
	- 빌드 툴(gradle, maven...) 없이 모듈 구성이 가능하다
	- JDK 자체가 여러 모듈로 나눠지며, 특정 모듈만 선택해서 다운로드 할 수 있다.
	- 조금 더 세밀한 접근성 제어가 가능하다.
		- private 멤버에 대한 리플렉션 오픈 여부도 설정 가능
	- module-info.java를 만들어 사용 (- 를 유일하게 허용한다.)
```java
module com.xxx {
	requires com.domain;  // implementation와 같다
    requires transitive com.xxx; // api와 같음
}
```
- 모듈은 기본적으로 다른 모듈에게 API를 노출하지 않는다.
	- 사용되는 모듈 입장에서 특정 패키지를 외부에 노출해 주어야 한다.
		- 위 코드 기준 `com.domain`에서 노출해야함
```java
module com.domain {
    exports org.domain to com.admin;
}
```
- export 키워드로 패키지를 열어줄수 있고 to를 사용해서 특정 모듈에 노출시킬수 있다.

- 모듈의 등장으로 모든 코드는 두 가지로 구분된다
	- module-info.java를 사용한 모듈안의 코드
		- named module
	- module-info.java를 사용하지 않은 모듈안의 코드
		- unnamed module

## JPMS의 추가적인 기능들


- JPMS
	- Java Platform Module System
	- Refecltion
		- Deep reflection
			- **private 멤버까지** 조작할 수 있는 리플렉션
		- Shallow reflection
			- 기본적인 **자바의 접근 지시어를 준수하는** 리플렉션
		- 다른 모듈에서 내 모듈 안 private 멤버에 리플렉션을 쓰려면 추가적인 설정을 해주어야 한다.
			- open
				- 전체 코드에 대한 deep reflection 허가
			- opens
				- 특정 패키지에 대한 deep reflection 허가
			- opens ... to
				- 특정 패키지만 특정 모듈에 deep reflection 허가
		- export 대신 open만 한다면
			- 컴파일 할 때 코드를 import 할 수는 없지만, deep reflection은 정상적으로 가능하다.
		- 주의사항
			- 모듈이 open 되어 있지 않더라도 shallow reflection은 할 수 있다.
	- 서비스 등록, 서비스 사용
		- 서비스란?
			- 코드의 변경 없이 원하는 기능을 갈아끼우는 매커니즘
			- 개념적으로 **DI**와 비슷하다.
		- 서비스 구현체를 등록하는방법
```java
module com.domain {
    exports org.domain;

    provides org.domain.service.StringRepository with
            org.domain.service.MemoryStringRepository,
            org.domain.service.DatabaseStringRepository;
}
```
		- 서비스 사용하는 방법
```java
module com.api {
    requires com.domain;
    uses org.domain.service.StringRepository;
}
```

- 주요 키워드
	- requires
		- 특정 모듈을 가져온다
		- compile
			- 특정 모듈의 컴파일 의존성만 가져온다
		- transitive
			- 특정 모둘을 추이적으로 가져온다.
	- export
		- 특정 패키지를 외부에 노출한다.
		- to
			- 특정 패키지를 특정 모듈에만 노출한다.
	- open
		- 모듈 전체에 대한 deep reflection을 허가한다.
	- opens
		- 특정 패키지에 대한 deep reflection을 허가한다.
		- to
			- 특정 모듈에만 특정 패키지의 deep reflection을 허가한다.
	- provides ... with ...
		- 서비스 구현체들을 등록한다.
	- uses
		- 특정 서비스 인터페이스를 사용한다.

- 눈에 보이지 않는 변경점
	- 클래스 로더의 구성 변경
		- 자바 9 이전
			- Bootstrap 클래스 로더
				- 가장 기본적인 클래스들을 가져온다.
			- Extensions 클래스 로더
				- 추가적인 클래스들을 가져온다.
				- 추가적인 클래스
					- 폴더 경로로 구분
			- System 클래스 로더
				- classpath에서 찾을 수 있는 클래스들을 가져온다.
		- 자바 9
			- Bootstrap 클래스 로더
				- **java.base** 모듈의 클래스들을 가져온다.
			- Platform 클래스 로더
				- Bootstrap 클래스 로더가 처리하지 않는 Java SE Platform or JCP 모듈의 클래스들을 가져온다.
			- Application 클래스 로더
				- Java SE Platform 혹은 JDK 안에 있지 않은 클래스들을 가져온다.
			- BootStrap ClassLoader의 역할은 축소
			- extension 매커니즘은 완전히 제거
			- 모듈 시스템을 사용하지 않더라도 여전히 classpath를 기준으로 클래스를 가져올 수 있다.
	- JRE, JDK의 구성 변경
		- rt.jar, tools.jar등 JRE / JDK 내부에 있떤 몇 가지 파일 삭제
		- JRE / JDK 디렉토리 구성에도 약간의 변화
		- Modular Image
			- 필요한 모듈들만 갖고 있는 JRE / JDK를 구성할 수 있다.

## 자바 9에서 추가된 언어 기능
- diamond syntax
	- 제네릭 클래스를 인스턴스화 할 때 우항의 타입을 생략할 수 있다.
- 확장된 try-with-resources
- @SafeVarargs를 private 메소드에도 적용
- 익명 내부 클래스 + diamond syntax
- 인터페이스 + private 메소드

## 자바 9의 추가적인 변경 내용
- 표준 라이브러리의 주요 변경 사항
- CompletableFuture API
	- 비동기 프로그래밍을 할때 사용한다

## 자바 9의 Flow API
- 리액티브 프로그래밍 지원을 위한 주요 API들이 추가되었다.
- 리액티브 프로그래밍
	- 응답이 빠르고, 탄련성과 회복성이 좋으며,
	- 메시지 기반으로 통신하는 비동기 non-blocking 방식의 프로그래밍
		- ex) Spring Webflux
	- 용어 정리
		- Publisher
			- 데이터를 제공하는 입장
		- Subscription
			- Publisher가 Subscriber에게 제공하는 일종의 리모콘
		- Subscriber
			- 데이터를 받는 입장
	- 리액티브 스트리즘
		- 리액티브 프로그래밍을 위한 라이브러리 표준
- Flow API
	- 리액티브 스트림즈 인터페이스가 JDK 표준으로 들어온것.
- RxJava, Reactor, Flow API 의 차이점
- Flow API 추가의 의미
	- 다양한 리액티브 라이브러리간의 호환성이 좋아지고,
	- 자바 내부에서도 리액티브 프로그래밍이 가능해졌다!